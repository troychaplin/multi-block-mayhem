(()=>{var e,i={225:(e,i,l)=>{"use strict";const a=window.wp.blocks,t=window.ReactJSXRuntime,m=window.wp.primitives;var o=(0,t.jsx)(m.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)(m.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})});const n=window.wp.i18n,r=window.wp.element,s=window.wp.blockEditor,u=window.wp.components,c=window.wp.data;var h=l(556),g=l.n(h);const d=["large","medium","thumbnail"],b="large",_={display:"flex",gap:"16px",flexDirection:"column"},p={backgroundColor:"#fef8ee",borderLeft:"4px solid #f0b849",padding:"8px 12px",color:"#1e1e1e"},y=({imageUrl:e,setAttributes:i,imageSize:l=b,minWidth:a=0,minHeight:m=0,attributes:o={},force:h=!1})=>{const[g,y]=(0,r.useState)(o?.imageId||null),[f,k]=(0,r.useState)(!1),[x,w]=(0,r.useState)(null),v=(0,r.useMemo)(()=>({hasMinimumDimensions:!o?.imageWidth||!o?.imageHeight||(!a||o.imageWidth>=a)&&(!m||o.imageHeight>=m),recommendationMessage:a&&m?`${a}px × ${m}px`:a?`${a}px wide`:m?`${m}px high`:""}),[o?.imageWidth,o?.imageHeight,a,m]),{hasMinimumDimensions:S,recommendationMessage:R}=v,j=(0,r.useCallback)(e=>{try{if(!e||!e.id)return null;if(l){let i=null;if(e.media_details?.sizes?.[l])return i=e.media_details.sizes[l],{url:i.source_url,width:i.width,height:i.height};if(e.sizes?.[l])return i=e.sizes[l],{url:i.url,width:i.width,height:i.height}}for(const i of d){let l=null;if(e.media_details?.sizes?.[i])return l=e.media_details.sizes[i],{url:l.source_url,width:l.width,height:l.height};if(e.sizes?.[i])return l=e.sizes[i],{url:l.url,width:l.width,height:l.height}}if(e.url||e.source_url){const i=e.url||e.source_url,l=e.width||e.media_details?.width,a=e.height||e.media_details?.height;return l&&a?{url:i,width:l,height:a}:{url:i,width:null,height:null}}return null}catch(e){return w((0,n.__)("Failed to load image details","multi-block-mayhem")),null}},[l]),I=(0,c.useSelect)(e=>{if(!g)return null;try{const i=e("core").getMedia(g);if(!i)return null;const l=j(i);return l?{...l,id:i.id}:null}catch(e){return w((0,n.__)("Failed to load image from media library","multi-block-mayhem")),null}},[g,j]);(0,r.useEffect)(()=>{I&&I.url&&(i({imageUrl:I.url,imageId:I.id,imageWidth:I.width,imageHeight:I.height,imageResolution:o.imageResolution||l}),w(null))},[I,i,o.imageResolution,l]);const z=(0,r.useCallback)(e=>{k(!0),w(null);try{if(!e||!e.id)return y(null),void i({imageUrl:"",imageId:null,imageWidth:null,imageHeight:null,imageResolution:o.imageResolution||l});const t=j(e);if(!t||!t.url)return void w((0,n.__)("Invalid image selected","multi-block-mayhem"));const r=!t.width||!t.height||(!a||t.width>=a)&&(!m||t.height>=m);if(h&&t.width&&t.height&&!r)return void w((0,n.__)("Selected image does not meet minimum size requirements","multi-block-mayhem"));y(e.id),i({imageUrl:t.url,imageId:e.id,imageWidth:t.width,imageHeight:t.height,imageResolution:o.imageResolution||l})}catch(e){w((0,n.__)("Failed to select image","multi-block-mayhem"))}finally{k(!1)}},[j,a,m,h,i,o.imageResolution,l]),C=(0,r.useCallback)(()=>{try{y(null),w(null),i({imageUrl:"",imageId:null,imageWidth:null,imageHeight:null,imageResolution:o.imageResolution||l})}catch(e){w((0,n.__)("Failed to remove image","multi-block-mayhem"))}},[i,o.imageResolution,l]),P=Boolean(e&&o?.imageWidth&&!S),T=Boolean((a||m)&&!e);(0,r.useEffect)(()=>{o?.imageId&&!g&&y(o.imageId)},[o?.imageId,g]),(0,r.useEffect)(()=>()=>{w(null),k(!1)},[]);const O=(0,r.useMemo)(()=>(0,t.jsx)(s.MediaUpload,{onSelect:z,allowedTypes:["image"],value:g,render:({open:i})=>(0,t.jsx)("div",{className:"mbm-image-controls",children:(0,t.jsxs)(u.ButtonGroup,{children:[(0,t.jsxs)(u.Button,{onClick:i,variant:"primary",disabled:f,"aria-label":e?(0,n.__)("Replace current image","multi-block-mayhem"):(0,n.__)("Select an image","multi-block-mayhem"),children:[f&&(0,t.jsx)(u.Spinner,{}),e?(0,n.__)("Replace Image","multi-block-mayhem"):(0,n.__)("Select Image","multi-block-mayhem")]}),e&&(0,t.jsx)(u.Button,{onClick:C,variant:"secondary",style:{marginLeft:"8px"},"aria-label":(0,n.__)("Remove current image","multi-block-mayhem"),children:(0,n.__)("Remove","multi-block-mayhem")})]})})}),[e,g,z,C,f]);return(0,t.jsxs)("div",{className:"mbm-image-uploader",style:_,role:"region","aria-label":(0,n.__)("Image uploader controls","multi-block-mayhem"),children:[x&&(0,t.jsx)(u.Notice,{status:"error",isDismissible:!0,onRemove:()=>w(null),className:"mbm-image-error",children:x}),P&&(0,t.jsxs)(u.Notice,{status:"warning",isDismissible:!1,className:"mbm-image-warning",role:"alert",children:[(0,n.__)("Current image size","multi-block-mayhem")," (",o.imageWidth,"px × ",o.imageHeight,"px)"," ",(0,n.__)("is smaller than recommended","multi-block-mayhem")," ",R]}),T&&(0,t.jsxs)("div",{className:"mbm-size-notice",style:p,role:"note","aria-label":(0,n.__)("Image size requirements","multi-block-mayhem"),children:[h?(0,n.__)("Required","multi-block-mayhem"):(0,n.__)("Recommended","multi-block-mayhem")," ",(0,n.__)("image size","multi-block-mayhem"),":"," ",R]}),O]})};y.propTypes={imageUrl:g().string,setAttributes:g().func.isRequired,imageSize:g().string,minWidth:g().number,minHeight:g().number,attributes:g().shape({imageId:g().number,imageWidth:g().number,imageHeight:g().number}),force:g().bool},y.defaultProps={imageUrl:"",imageSize:b,minWidth:0,minHeight:0,attributes:{},force:!1},(0,n.__)("Square - 1:1","multi-block-mayhem"),(0,n.__)("Standard - 4:3","multi-block-mayhem"),(0,n.__)("Portrait - 3:4","multi-block-mayhem"),(0,n.__)("Classic - 3:2","multi-block-mayhem"),(0,n.__)("Classic Portrait - 2:3","multi-block-mayhem"),(0,n.__)("Wide - 16:9","multi-block-mayhem"),(0,n.__)("Tall - 9:16","multi-block-mayhem");const f=[{label:(0,n.__)("Thumbnail","multi-block-mayhem"),value:"thumbnail"},{label:(0,n.__)("Medium","multi-block-mayhem"),value:"medium"},{label:(0,n.__)("Large","multi-block-mayhem"),value:"large"},{label:(0,n.__)("Full Size","multi-block-mayhem"),value:"full"}],k=JSON.parse('{"UU":"multi-block-mayhem/image-collage-image"}');(0,a.registerBlockType)(k.UU,{icon:o,edit:function({attributes:e,setAttributes:i,context:l,style:a}){const[m,o]=(0,r.useState)(e.focalPoint||{x:.5,y:.5}),{columnSpan:c,columns:h,aspectRatio:g,imageUrl:d,imageResolution:b,zoom:_}=e,p=d?"multi-block-mayhem-editor":"multi-block-mayhem-placeholder",k=(0,s.useBlockProps)({className:p,style:{...a,"--mb-mayhem-image-collage-col-span":c,"--mb-mayhem-image-collage-aspect-ratio":g}});i({columns:l["multi-block-mayhem/image-collage-columns"],aspectRatio:l["multi-block-mayhem/image-collage-aspect-ratio"]});const x=(0,r.useCallback)(e=>{o(e),i({focalPoint:e})},[i]),w={backgroundImage:`url(${d})`,backgroundPosition:`${100*m.x}% ${100*m.y}%`,backgroundSize:"cover",transform:`scale(1.${String(_).padStart(2,"0")})`};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.InspectorControls,{children:(0,t.jsxs)(u.__experimentalToolsPanel,{label:(0,n.__)("Image Settings","multi-block-mayhem"),resetAll:()=>i({columnSpan:1,imageUrl:"",imageId:null,imageWidth:null,imageHeight:null,imageResolution:"large",zoom:0}),children:[(0,t.jsx)(u.__experimentalToolsPanelItem,{hasValue:()=>1!==c,label:(0,n.__)("Column Span","multi-block-mayhem"),onDeselect:()=>i({columnSpan:1}),isShownByDefault:!0,children:(0,t.jsx)(u.RangeControl,{label:(0,n.__)("Column Span","multi-block-mayhem"),min:1,max:h,value:c,onChange:e=>i({columnSpan:e})})}),(0,t.jsx)(u.__experimentalToolsPanelItem,{hasValue:()=>!!d,label:(0,n.__)("Image Upload","multi-block-mayhem"),onDeselect:()=>i({imageUrl:"",imageId:null,imageWidth:null,imageHeight:null}),isShownByDefault:!0,children:(0,t.jsx)(y,{imageUrl:d,setAttributes:i,imageSize:b,attributes:e})}),d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.__experimentalToolsPanelItem,{hasValue:()=>.5!==m.x||.5!==m.y,label:(0,n.__)("Focal Point","multi-block-mayhem"),onDeselect:()=>{const e={x:.5,y:.5};o(e),i({focalPoint:e})},isShownByDefault:!0,children:(0,t.jsx)(u.FocalPointPicker,{url:d,value:m,onDragStart:o,onDrag:x,onChange:x})}),(0,t.jsx)(u.__experimentalToolsPanelItem,{hasValue:()=>"large"!==b,label:(0,n.__)("Image Resolution","multi-block-mayhem"),onDeselect:()=>{i({imageResolution:"large"})},isShownByDefault:!0,children:(0,t.jsx)(u.SelectControl,{label:(0,n.__)("Image Resolution","multi-block-mayhem"),value:b,options:f,onChange:e=>i({imageResolution:e})})}),(0,t.jsx)(u.__experimentalToolsPanelItem,{hasValue:()=>!!_,label:(0,n.__)("Image Zoom","multi-block-mayhem"),onDeselect:()=>i({zoom:0}),isShownByDefault:!0,children:(0,t.jsx)(u.RangeControl,{label:(0,n.__)("Image Zoom","multi-block-mayhem"),min:0,max:50,value:_,onChange:e=>i({zoom:e})})})]})]})}),d?(0,t.jsx)("div",{...k,style:{...k.style},children:(0,t.jsx)("div",{style:{...w}})}):(0,t.jsx)("div",{...k,children:"Add Image"})]})}})},556:(e,i,l)=>{e.exports=l(694)()},694:(e,i,l)=>{"use strict";var a=l(925);function t(){}function m(){}m.resetWarningCache=t,e.exports=function(){function e(e,i,l,t,m,o){if(o!==a){var n=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw n.name="Invariant Violation",n}}function i(){return e}e.isRequired=e;var l={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:i,element:e,elementType:e,instanceOf:i,node:e,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:m,resetWarningCache:t};return l.PropTypes=l,l}},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},l={};function a(e){var t=l[e];if(void 0!==t)return t.exports;var m=l[e]={exports:{}};return i[e](m,m.exports,a),m.exports}a.m=i,e=[],a.O=(i,l,t,m)=>{if(!l){var o=1/0;for(u=0;u<e.length;u++){for(var[l,t,m]=e[u],n=!0,r=0;r<l.length;r++)(!1&m||o>=m)&&Object.keys(a.O).every(e=>a.O[e](l[r]))?l.splice(r--,1):(n=!1,m<o&&(o=m));if(n){e.splice(u--,1);var s=t();void 0!==s&&(i=s)}}return i}m=m||0;for(var u=e.length;u>0&&e[u-1][2]>m;u--)e[u]=e[u-1];e[u]=[l,t,m]},a.n=e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return a.d(i,{a:i}),i},a.d=(e,i)=>{for(var l in i)a.o(i,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:i[l]})},a.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),(()=>{var e={914:0,206:0};a.O.j=i=>0===e[i];var i=(i,l)=>{var t,m,[o,n,r]=l,s=0;if(o.some(i=>0!==e[i])){for(t in n)a.o(n,t)&&(a.m[t]=n[t]);if(r)var u=r(a)}for(i&&i(l);s<o.length;s++)m=o[s],a.o(e,m)&&e[m]&&e[m][0](),e[m]=0;return a.O(u)},l=globalThis.webpackChunkmulti_block_mayhem=globalThis.webpackChunkmulti_block_mayhem||[];l.forEach(i.bind(null,0)),l.push=i.bind(null,l.push.bind(l))})();var t=a.O(void 0,[206],()=>a(225));t=a.O(t)})();